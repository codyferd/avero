<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Avero</title>
        <script src="../cdn.js"></script>
        <style>
            [v-cloak] {
                display: none;
            }
            .glass {
                background: rgba(255, 255, 255, 0.7);
                backdrop-filter: blur(20px);
            }
            .drawer-anim-enter-active,
            .drawer-anim-leave-active {
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            }
            .drawer-anim-enter-from,
            .drawer-anim-leave-to {
                opacity: 0;
                transform: translateY(30px) scale(0.95);
            }
        </style>
    </head>
    <body class="overflow-hidden select-none bg-slate-900 text-slate-900">
        <div
            id="app"
            v-cloak
            class="h-screen w-screen flex flex-col relative bg-cover bg-center"
            style="background-image: url(&quot;../media/background.avif&quot;)"
        >
            <div class="flex-1 relative" @click="isDrawerOpen = false">
                <div v-for="app in apps" :key="app.id">
                    <div
                        v-if="app.isOpen"
                        class="absolute glass rounded-2xl flex flex-col overflow-hidden border border-white/50 shadow-2xl"
                        :style="{ left: app.x + 'px', top: app.y + 'px', width: app.w + 'px', height: app.h + 'px', zIndex: app.zIndex }"
                        @mousedown="focusWindow(app.id)"
                    >
                        <div
                            class="h-11 flex items-center justify-between px-4 bg-white/40 cursor-move border-b border-white/20"
                            @mousedown="startDrag($event, app)"
                        >
                            <div class="flex items-center gap-2">
                                <span class="text-lg">{{ app.icon }}</span
                                ><span class="text-sm font-bold tracking-tight">{{ app.title }}</span>
                            </div>
                            <button
                                @click.stop="app.isOpen = false"
                                class="w-7 h-7 flex items-center justify-center rounded-full hover:bg-red-500/20 text-red-600 transition-colors"
                            >
                                âœ•
                            </button>
                        </div>
                        <div class="flex-1 bg-white relative">
                            <div v-if="activeMovingId === app.id" class="absolute inset-0 z-50"></div>
                            <iframe :src="app.path" class="w-full h-full border-none"></iframe>
                        </div>
                        <div
                            class="absolute bottom-0 right-0 w-6 h-6 cursor-nwse-resize flex items-end justify-end p-1 group"
                            @mousedown.stop.prevent="startResize($event, app)"
                        >
                            <div
                                class="w-2 h-2 border-r-2 border-b-2 border-slate-400 group-hover:border-slate-900 transition-colors"
                            ></div>
                        </div>
                    </div>
                </div>
            </div>
            <transition name="drawer-anim"
                ><div
                    v-if="isDrawerOpen"
                    class="absolute bottom-20 left-6 p-8 glass border border-white/60 rounded-[2rem] shadow-2xl w-96 z-[10000]"
                >
                    <div class="flex items-center justify-between mb-6">
                        <h2 class="font-black text-2xl tracking-tighter italic text-indigo-700">AVERO</h2>
                        <div class="text-[10px] uppercase font-bold tracking-widest opacity-50">v1.0 Beta</div>
                    </div>
                    <div class="grid grid-cols-3 gap-6">
                        <div
                            v-for="app in apps"
                            :key="'drawer-'+app.id"
                            @click="openApp(app.id)"
                            class="flex flex-col items-center gap-2 p-3 rounded-2xl hover:bg-white/50 cursor-pointer transition-all active:scale-90 group"
                        >
                            <div
                                class="w-14 h-14 rounded-2xl flex items-center justify-center text-3xl shadow-lg group-hover:shadow-indigo-500/20 transition-all"
                                :class="app.color"
                            >
                                {{ app.icon }}
                            </div>
                            <span class="text-[11px] font-bold text-slate-700">{{ app.title }}</span>
                        </div>
                    </div>
                </div></transition
            >
            <div class="h-16 glass border-t border-white/40 flex items-center justify-between px-6 z-[9999]">
                <div class="flex items-center gap-4">
                    <button
                        @click="isDrawerOpen = !isDrawerOpen"
                        class="w-11 h-11 bg-indigo-600 rounded-2xl shadow-lg flex items-center justify-center text-white font-black hover:bg-indigo-500 transition-all active:scale-90"
                    >
                        A
                    </button>
                    <div class="flex gap-2">
                        <div
                            v-for="app in apps"
                            :key="'task-'+app.id"
                            v-show="app.isOpen"
                            @click="focusWindow(app.id)"
                            class="w-11 h-11 rounded-2xl glass border border-white/40 flex items-center justify-center cursor-pointer hover:bg-white/60 transition-colors text-xl"
                        >
                            {{ app.icon }}
                        </div>
                    </div>
                </div>
                <div class="flex flex-col items-end leading-none">
                    <span class="text-slate-900 font-black text-sm">{{ currentTime }}</span
                    ><span class="text-[10px] font-bold opacity-40">2026</span>
                </div>
            </div>
        </div>
        <script>
            const { createApp, ref, onMounted } = Vue;
            createApp({
                setup() {
                    const isDrawerOpen = ref(false);
                    const topZ = ref(100);
                    const currentTime = ref("");
                    const activeMovingId = ref(null);
                    const apps = ref([
                        {
                            id: 0,
                            title: "About",
                            icon: "ðŸ ",
                            path: "../home",
                            color: "bg-indigo-500",
                            x: 40,
                            y: 40,
                            w: 500,
                            h: 400,
                            zIndex: 10,
                            isOpen: false,
                        },
                        {
                            id: 1,
                            title: "Calculator",
                            icon: "ðŸ”¢",
                            path: "../calculator/index.html",
                            color: "bg-orange-500",
                            x: 100,
                            y: 100,
                            w: 320,
                            h: 480,
                            zIndex: 11,
                            isOpen: false,
                        },
                        {
                            id: 2,
                            title: "Chess",
                            icon: "â™Ÿï¸",
                            path: "../chess/index.html",
                            color: "bg-slate-700",
                            x: 200,
                            y: 150,
                            w: 600,
                            h: 600,
                            zIndex: 12,
                            isOpen: false,
                        },
                        {
                            id: 3,
                            title: "Superbird",
                            icon: "ðŸ¦",
                            path: "../superbirdjumper3/index.html",
                            color: "bg-yellow-400",
                            x: 300,
                            y: 200,
                            w: 400,
                            h: 600,
                            zIndex: 13,
                            isOpen: false,
                        },
                    ]);
                    const openApp = (id) => {
                        const app = apps.value.find((a) => a.id === id);
                        app.isOpen = true;
                        isDrawerOpen.value = false;
                        focusWindow(id);
                    };
                    const focusWindow = (id) => {
                        const app = apps.value.find((a) => a.id === id);
                        topZ.value++;
                        app.zIndex = topZ.value;
                    };
                    const startDrag = (e, app) => {
                        focusWindow(app.id);
                        activeMovingId.value = app.id;
                        const offsetX = e.clientX - app.x;
                        const offsetY = e.clientY - app.y;
                        const move = (e) => {
                            app.x = e.clientX - offsetX;
                            app.y = e.clientY - offsetY;
                        };
                        const stop = () => {
                            activeMovingId.value = null;
                            window.removeEventListener("mousemove", move);
                            window.removeEventListener("mouseup", stop);
                        };
                        window.addEventListener("mousemove", move);
                        window.addEventListener("mouseup", stop);
                    };
                    const startResize = (e, app) => {
                        focusWindow(app.id);
                        activeMovingId.value = app.id;
                        const startW = app.w;
                        const startH = app.h;
                        const startX = e.clientX;
                        const startY = e.clientY;
                        const resize = (e) => {
                            app.w = Math.max(200, startW + (e.clientX - startX));
                            app.h = Math.max(150, startH + (e.clientY - startY));
                        };
                        const stop = () => {
                            activeMovingId.value = null;
                            window.removeEventListener("mousemove", resize);
                            window.removeEventListener("mouseup", stop);
                        };
                        window.addEventListener("mousemove", resize);
                        window.addEventListener("mouseup", stop);
                    };
                    onMounted(() => {
                        setInterval(() => {
                            currentTime.value = new Date().toLocaleTimeString([], {
                                hour: "2-digit",
                                minute: "2-digit",
                                hour12: false,
                            });
                        }, 1000);
                    });
                    return {
                        apps,
                        isDrawerOpen,
                        startDrag,
                        startResize,
                        focusWindow,
                        openApp,
                        currentTime,
                        activeMovingId,
                    };
                },
            }).mount("#app");
        </script>
    </body>
</html>
